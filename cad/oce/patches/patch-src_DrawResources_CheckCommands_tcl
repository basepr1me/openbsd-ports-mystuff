$OpenBSD$

Index: src/DrawResources/CheckCommands.tcl
--- src/DrawResources/CheckCommands.tcl.orig
+++ src/DrawResources/CheckCommands.tcl
@@ -1052,6 +1052,7 @@ help checkplatform {
   Allowed options are:
     -windows : return 1 if current platform is 'Windows', otherwise return 0
     -linux   : return 1 if current platform is 'Linux', otherwise return 0
+    -openbsd : return 1 if current platform is 'OpenBSD', otherwise return 0
     -osx     : return 1 if current platform is 'MacOS X', otherwise return 0
 
   Only one option can be used at once.
@@ -1060,16 +1061,20 @@ help checkplatform {
 proc checkplatform {args} {
     set check_for_windows false
     set check_for_linux false
+    set check_for_openbsd false
     set check_for_macosx false
 
     set options {{"-windows" check_for_windows 0}
                  {"-linux" check_for_linux 0}
+                 {"-openbsd" check_for_openbsd 0}
                  {"-osx" check_for_macosx 0}}
 
     _check_args ${args} ${options} "checkplatform"
 
     if { [regexp "indows" $::tcl_platform(os)] } {
         set current_platform Windows
+    } elseif { $::tcl_platform(os) == "OpenBSD" } {
+        set current_platform OpenBSD
     } elseif { $::tcl_platform(os) == "Linux" } {
         set current_platform Linux
     } elseif { $::tcl_platform(os) == "Darwin" } {
@@ -1077,12 +1082,12 @@ proc checkplatform {args} {
     }
 
     # no args are given
-    if { !${check_for_windows} && !${check_for_linux} && !${check_for_macosx}} {
+    if { !${check_for_windows} && !${check_for_linux} && !${check_for_macosx} && !${check_for_openbsd}} {
         return ${current_platform}
     }
 
     # check usage of proc checkplatform
-    if { [expr [string is true ${check_for_windows}] + [string is true ${check_for_linux}] + [string is true ${check_for_macosx}] ] > 1} {
+    if { [expr [string is true ${check_for_windows}] + [string is true ${check_for_openbsd}] + [string is true ${check_for_linux}] + [string is true ${check_for_macosx}] ] > 1} {
         error "Error: wrong usage of command checkplatform, only single option can be used at once"
     }
 
@@ -1093,6 +1098,10 @@ proc checkplatform {args} {
 
     # checking for Mac OS X platforms
     if { ${check_for_linux} && ${current_platform} == "Linux" } {
+        return 1
+    }
+
+    if { ${check_for_openbsd} && ${current_platform} == "OpenBSD" } {
         return 1
     }
 
